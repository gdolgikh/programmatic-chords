---
import Layout from '../components/Layout.astro';
---

<Layout title="Cookie Policy — Chord Library" description="Cookie Policy for Chord Library. Learn what cookies and local storage we use and how to manage your preferences.">
  <article class="legal-page">
    <h1 class="legal-title">Cookie Policy</h1>
    <p class="legal-updated">Last updated: February 20, 2026</p>

    <h2>1. What Are Cookies</h2>
    <p>
      Cookies are small text files stored on your device by your web browser. Local storage is a similar
      browser technology that allows websites to store data locally. We use both to make Chord Library
      function properly and, with your consent, to understand how the site is used.
    </p>

    <h2>2. Cookies and Storage We Use</h2>

    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Purpose</th>
          <th>Duration</th>
          <th>Essential</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>sb-*-auth-token</code></td>
          <td>Cookie</td>
          <td>Maintains your sign-in session via Supabase authentication</td>
          <td>Session / persistent</td>
          <td>Yes</td>
        </tr>
        <tr>
          <td><code>theme</code></td>
          <td>localStorage</td>
          <td>Remembers your dark/light mode preference</td>
          <td>Persistent</td>
          <td>Yes</td>
        </tr>
        <tr>
          <td><code>cookie_consent</code></td>
          <td>localStorage</td>
          <td>Stores your cookie consent choice</td>
          <td>Persistent</td>
          <td>Yes</td>
        </tr>
        <tr>
          <td><code>auth_return_to</code></td>
          <td>localStorage</td>
          <td>Redirects you to the correct page after sign-in</td>
          <td>Temporary</td>
          <td>Yes</td>
        </tr>
        <tr>
          <td>Ahrefs analytics</td>
          <td>Script / cookie</td>
          <td>Collects anonymized site usage data for analytics</td>
          <td>Per Ahrefs policy</td>
          <td><strong>No</strong></td>
        </tr>
      </tbody>
    </table>

    <h2>3. Essential vs Non-Essential</h2>
    <p>
      <strong>Essential cookies</strong> are required for the site to function correctly — for example, keeping
      you signed in and remembering your theme preference. These do not require your consent under EU law.
    </p>
    <p>
      <strong>Non-essential cookies</strong> (such as analytics) are only activated after you give your explicit
      consent via our cookie consent banner. You may reject these without any impact on site functionality.
    </p>

    <h2>4. Manage Your Preferences</h2>
    <p>
      You can change your cookie consent choice at any time by clicking the button below. This will reset your
      preference and display the consent banner again.
    </p>
    <button id="resetConsent" class="manage-btn">Manage Cookie Preferences</button>

    <p>
      You can also manage cookies through your browser settings. Most browsers allow you to view, delete,
      and block cookies. Note that blocking essential cookies may prevent parts of the site from working correctly.
    </p>
    <ul>
      <li><a href="https://support.google.com/chrome/answer/95647" target="_blank" rel="noopener">Chrome</a></li>
      <li><a href="https://support.mozilla.org/en-US/kb/clear-cookies-and-site-data-firefox" target="_blank" rel="noopener">Firefox</a></li>
      <li><a href="https://support.apple.com/en-us/105082" target="_blank" rel="noopener">Safari</a></li>
      <li><a href="https://support.microsoft.com/en-us/microsoft-edge/delete-cookies-in-microsoft-edge-63947406-40ac-c3b8-57b9-2a946a29ae09" target="_blank" rel="noopener">Edge</a></li>
    </ul>

    <h2>5. Changes to This Policy</h2>
    <p>
      We may update this Cookie Policy from time to time. The "Last updated" date at the top reflects the most
      recent revision.
    </p>

    <h2>6. Contact</h2>
    <p>
      For questions about cookies or this policy:<br>
      <a href="/contact/">contact page</a>
    </p>
    <p>
      For full details on how we handle your personal data, see our <a href="/privacy-policy/">Privacy Policy</a>.
    </p>
  </article>
</Layout>

<script is:inline>
  document.getElementById('resetConsent')?.addEventListener('click', function() {
    localStorage.removeItem('cookie_consent');
    var banner = document.getElementById('cookieConsent');
    if (banner) banner.style.display = 'block';
    window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
  });
</script>

<style>
  .legal-page {
    padding-top: 2rem;
    padding-bottom: 3rem;
    max-width: 720px;
    margin: 0 auto;
  }

  .legal-title {
    font-family: 'Playfair Display', serif;
    font-size: clamp(1.8rem, 4vw, 2.5rem);
    font-weight: 900;
    color: var(--ink);
    margin-bottom: 0.5rem;
  }

  .legal-updated {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 0.75rem;
    color: var(--ink-faded);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-bottom: 2rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid var(--rule);
  }

  .legal-page h2 {
    font-family: 'Playfair Display', serif;
    font-size: 1.4rem;
    font-weight: 700;
    color: var(--ink);
    margin-top: 2rem;
    margin-bottom: 0.75rem;
  }

  .legal-page p,
  .legal-page li {
    font-size: 0.95rem;
    line-height: 1.75;
    color: var(--ink-faded);
    margin-bottom: 0.75rem;
  }

  .legal-page ul {
    padding-left: 1.5rem;
    margin-bottom: 1rem;
  }

  .legal-page a {
    color: var(--red);
    text-decoration: underline;
    text-underline-offset: 2px;
  }

  .legal-page a:hover {
    opacity: 0.8;
  }

  .legal-page strong {
    color: var(--ink);
    font-weight: 600;
  }

  .legal-page code {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 0.8em;
    background: var(--paper);
    padding: 0.15em 0.4em;
    border: 1px solid var(--rule);
  }

  .legal-page table {
    width: 100%;
    border-collapse: collapse;
    margin: 1rem 0;
    font-size: 0.85rem;
  }

  .legal-page th,
  .legal-page td {
    text-align: left;
    padding: 0.6rem 0.8rem;
    border: 1px solid var(--rule);
  }

  .legal-page th {
    background: var(--paper);
    font-family: 'IBM Plex Mono', monospace;
    font-size: 0.75rem;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--ink);
  }

  .legal-page td {
    color: var(--ink-faded);
  }

  .manage-btn {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 0.8rem;
    font-weight: 500;
    letter-spacing: 0.03em;
    padding: 0.6rem 1.2rem;
    background: var(--paper);
    border: 1px solid var(--rule);
    color: var(--ink);
    cursor: pointer;
    transition: all 0.15s ease;
    margin: 0.5rem 0 1rem;
  }

  .manage-btn:hover {
    background: var(--rule);
  }
</style>
